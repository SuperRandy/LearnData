import{_ as e}from"./plugin-vue_export-helper-x3n3nnut.js";import{r as t,o as i,c as l,a as n,b as s,d as o,e as c}from"./app-R8OAA0YZ.js";const p={},r=n("p",null,"Git 是版本控制的最佳方法。我的博客和开源软件都是部署在 GitHub 上，但有些含有私钥的代码不希望部署在外网，因此选择使用 GitLab 镜像私有化部署到本地。",-1),u={href:"https://docs.gitlab.com/ee/install/docker.html",target:"_blank",rel:"noopener noreferrer"},d=c(`<h2 id="部署命令" tabindex="-1"><a class="header-anchor" href="#部署命令" aria-hidden="true">#</a> 部署命令</h2><p>GitLab 会占用 4G 内存，初始化部署时间较长，最好等半小时在连接。你可以在服务器上使用 <code>sudo docker logs -f gitlab</code> 来跟踪部署进度。</p><p>部署好后，在服务器上运行 <code>sudo docker exec -it gitlab grep &#39;Password:&#39; /etc/gitlab/initial_root_password</code> 获取 root 用户的初始随机密码。如果无法用获得的密码登录，可能是因为你的初始化部署有问题，需清空配置文件夹，然后重新部署。</p><div class="language-yaml line-numbers-mode" data-ext="yml"><pre class="language-yaml"><code><span class="token key atrule">version</span><span class="token punctuation">:</span> <span class="token string">&#39;3.6&#39;</span>
<span class="token key atrule">services</span><span class="token punctuation">:</span>
  <span class="token key atrule">web</span><span class="token punctuation">:</span>
    <span class="token key atrule">image</span><span class="token punctuation">:</span> <span class="token string">&#39;gitlab/gitlab-ce:latest&#39;</span>
    <span class="token key atrule">container_name</span><span class="token punctuation">:</span> <span class="token string">&#39;gitlab&#39;</span>
    <span class="token key atrule">restart</span><span class="token punctuation">:</span> always
    <span class="token key atrule">hostname</span><span class="token punctuation">:</span> <span class="token string">&#39;gitlab&#39;</span>
    <span class="token key atrule">environment</span><span class="token punctuation">:</span>
      <span class="token key atrule">TZ</span><span class="token punctuation">:</span> <span class="token string">&#39;Asia/Shanghai&#39;</span>
      <span class="token key atrule">GITLAB_OMNIBUS_CONFIG</span><span class="token punctuation">:</span> <span class="token punctuation">|</span><span class="token scalar string">
        external_url &#39;http://192.168.2.3:49140&#39;
        gitlab_rails[&#39;gitlab_shell_ssh_port&#39;] = 49142</span>
    <span class="token key atrule">ports</span><span class="token punctuation">:</span>
      <span class="token punctuation">-</span> <span class="token string">&#39;49140:49140&#39;</span>
      <span class="token punctuation">-</span> <span class="token string">&#39;49142:22&#39;</span>
    <span class="token key atrule">volumes</span><span class="token punctuation">:</span>
      <span class="token punctuation">-</span> /volume1/docker/GitLab/config<span class="token punctuation">:</span>/etc/gitlab
      <span class="token punctuation">-</span> /volume1/docker/GitLab/logs<span class="token punctuation">:</span>/var/log/gitlab
      <span class="token punctuation">-</span> /volume1/docker/GitLab/data<span class="token punctuation">:</span>/var/opt/gitlab
    <span class="token key atrule">shm_size</span><span class="token punctuation">:</span> <span class="token string">&#39;256m&#39;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="初始配置" tabindex="-1"><a class="header-anchor" href="#初始配置" aria-hidden="true">#</a> 初始配置</h2><p>SourceTree、GitHub Desktop 均支持管理 GitLab 项目，操作类似。注意，如果本地已经建好了项目，先不要在 GitLab 网页上建立任何数据，直接上传就好，否则容易报错。</p><p>以下是命令行的初始配置步骤：</p><ol><li><p><strong>在 GitLab 上创建新仓库</strong>：</p><ul><li>登录到您的 GitLab 实例。</li><li>创建一个新的仓库（Project）。在仓库创建页面上，填写必要的信息，例如仓库名称、描述等。</li></ul></li><li><p><strong>在本地初始化 Git 仓库</strong>：</p><ul><li>打开终端或命令提示符。</li><li>导航到您的项目文件夹：<code>cd 路径到您的项目文件夹</code></li><li>初始化 Git 仓库：<code>git init</code></li><li>添加文件到仓库：<code>git add .</code> （这会添加所有文件，如果只想添加特定文件，可以用<code>git add 文件名</code>）</li></ul></li><li><p><strong>配置 Git 仓库</strong>：</p><ul><li>设置您的用户信息（如果之前没有设置的话）： <ul><li><code>git config --global user.name &quot;您的名字&quot;</code></li><li><code>git config --global user.email &quot;您的邮箱&quot;</code></li></ul></li><li>提交您的更改：<code>git commit -m &quot;首次提交&quot;</code></li></ul></li><li><p><strong>将本地仓库关联到 GitLab</strong>：</p><ul><li>获取您在 GitLab 上创建的仓库的 URL。这通常是<code>http://您的NAS地址/用户名/仓库名.git</code>。</li><li>在终端中关联 GitLab 仓库：<code>git remote add origin 仓库URL</code></li></ul></li><li><p><strong>上传代码到 GitLab</strong>：</p><ul><li>推送代码到 GitLab：<code>git push -u origin master</code>（或者如果您使用的是 main 分支，就是<code>git push -u origin main</code>）</li><li>初始推送会提示你输入账户密码。</li></ul></li><li><p><strong>后续更新</strong>：</p><ul><li>以后当您进行了更多的更改并想要上传这些更改时，您只需要运行<code>git add .</code>，<code>git commit -m &quot;更新信息&quot;</code>和<code>git push</code>。</li></ul></li></ol>`,8);function k(g,b){const a=t("ExternalLinkIcon");return i(),l("div",null,[r,n("p",null,[n("a",u,[s("GitLab"),o(a)]),s(" 功能与 GitHub 类似，提供了集成/持续部署（CI/CD）和项目管理工具，适合用于源代码管理和版本控制。")]),d])}const h=e(p,[["render",k],["__file","gitlab.html.vue"]]);export{h as default};
